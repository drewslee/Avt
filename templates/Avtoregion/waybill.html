{% extends "index.html" %}
{% load bootstrap3 %}
{% load static %}
{% block content %}
    <link rel="stylesheet" href="{% static "css/daterangepicker.css" %}">
    <link rel="stylesheet" href="{% static "css/chosen.min.css" %}">
    <link rel="stylesheet" href="{% static "css/chosenIcon.css" %}">
    <script type="text/javascript" src="{% static "js/daterangepicker.js" %}"></script>
    <script type="text/javascript" src="{% static "js/chosen.jquery.min.js" %}"></script>
    <script type="text/javascript" src="{% static "js/chosenIcon.jquery.js" %}"></script>
    <script type="text/javascript">
        $(function () {
            $('input[name="daterange"]').daterangepicker({
                "autoApply": true,
                "alwaysShowCalendars": true,
                ranges: {
                    'Этот месяц': [moment().startOf('month'), moment().endOf('month')],
                    'Прошлый месяц': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
                },
                locale: {
                    "fromLabel": "C",
                    "toLabel": "По",
                    "monthNames": [
                        "Январь",
                        "Февраль",
                        "Март",
                        "Апрель",
                        "Май",
                        "Июнь",
                        "Июль",
                        "Август",
                        "Сентябрь",
                        "Октябрь",
                        "Ноябрь",
                        "Декабрь"
                    ],
                    customRangeLabel: 'Свой диапазон',
                    format: 'YYYY-MM-DD',
                    "firstDay": 1,
                    "weekLabel": "Неделя",
                    "daysOfWeek": [
                        "Вс",
                        "Пн",
                        "Вт",
                        "Ср",
                        "Чт",
                        "Пт",
                        "Сб"
                    ]

                }
            });
            $('select[name="car"]').chosen({
                placeholder_text_single: 'Выберите машину',
            });
            $(".icon-select").chosenIcon({});
        });
    </script>
    <div class="container">
        <div class="form-group">
            <div class="form-group">
                <form action="" method="post">
                    {% csrf_token %}
                    <div class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                        <input name="daterange" type="text" class="form-control"/>
                    </div>
                    <select name="car" class="icon-select form-control">
                        {% for field in qset %}
                            <option data-icon="fa-truck" value="{{ field.number }}">{{ field.number }}</option>
                        {% endfor %}
                    </select>
                    {% buttons %}
                        <button class="btn btn-success form-control"> {% bootstrap_icon "star" %}Сформировать</button>
                    {% endbuttons %}
                    {% if urls %}
                        {% for url in urls %}
                            <a href="{% static url %}">Путевой лист {{ forloop.counter }}</a>
                        {% endfor %}
                    {% endif %}
                </form>
            </div>
        </div>
    </div>
{% endblock %}
